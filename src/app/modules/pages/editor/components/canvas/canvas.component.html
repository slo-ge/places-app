<app-loading-animation *ngIf="loading"></app-loading-animation>
<div class="preview">
  <aside [class.visible]="mobileToolbar">
    <tabs>
      <tab tabTitle="Presets" [faIcon]="faPalette">
        <h3>Select Preset</h3>
        <app-layout-selector (layout)="setLayout($event)"></app-layout-selector>
      </tab>
      <tab tabTitle="Add" [faIcon]="faCode">
        <h3>Select Meta Info</h3>
        <app-meta-data-actions *ngIf="this.currentPresetService"
                               [presetService]="this.currentPresetService"
                               [metaProperties]="metaProperties">
        </app-meta-data-actions>
      </tab>

      <tab tabTitle="Download" [faIcon]="faDownload">
        <h3>Download</h3>
          <app-tab-download [presetService]="currentPresetService"></app-tab-download>
      </tab>

      <tab tabTitle="Settings" [faIcon]="faCogs">
        <h3>Settings</h3>
        <ng-container *ngIf="loggedInUser | async">
          <button class="save-change secondary" (click)="resetTemplate()">Reset Template
            <fa-icon [icon]="undoIcon"></fa-icon>
          </button>
          <button class="save-change secondary" (click)="updateValues()">Save Template
            <fa-icon [icon]="saveChangesIcon"></fa-icon>
          </button>
          <div>{{sentUpdateResponse}}</div>
        </ng-container>
        <app-profile></app-profile>
      </tab>
    </tabs>
  </aside>
  <main>
    <div class="canvas-actions">
      <div class="actions-row">
        <div class="mobile-opener" (click)="mobileToolbar = !mobileToolbar">
          <fa-icon [icon]="faPlus" *ngIf="!mobileToolbar"></fa-icon>
          <fa-icon [icon]="faWindowClose" *ngIf="mobileToolbar"></fa-icon>
        </div>
        <app-simple-actions></app-simple-actions>
      </div>
    </div>

    <div class="canvas-wrapper" style="--zoom-factor: {{zoomFactor}}">
      <canvas id="myCanvas"></canvas>
    </div>
    <app-zoom (zoomFactorChange)="setZoomFactor($event)" [zoomFactor]="initZoom"></app-zoom>
  </main>
</div>
